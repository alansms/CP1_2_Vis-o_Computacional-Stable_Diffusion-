<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé¨ Demo - Stable Diffusion Video Generator</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .demo-banner {
            background: linear-gradient(135deg, #ff6b6b, #ffa500);
            color: white;
            padding: 15px;
            text-align: center;
            margin-bottom: 20px;
            border-radius: 10px;
        }
        .demo-banner h2 {
            margin: 0;
            font-size: 1.5rem;
        }
        .demo-banner p {
            margin: 5px 0 0 0;
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Demo Banner -->
        <div class="demo-banner">
            <h2>üé¨ Demo Mode</h2>
            <p>Esta √© uma demonstra√ß√£o da interface. Para funcionalidade completa, configure o backend.</p>
        </div>

        <!-- Header -->
        <header class="header">
            <h1>üé¨ Stable Diffusion Video Generator</h1>
            <p>Arraste uma imagem e gere um v√≠deo com movimento real usando IA</p>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Version Selection -->
            <div class="version-selector">
                <h3>Escolha a vers√£o:</h3>
                <div class="version-buttons">
                    <button id="version1" class="version-btn active">
                        <i class="fas fa-play"></i>
                        Vers√£o 1: Continuidade + Movimento
                    </button>
                    <button id="version2" class="version-btn">
                        <i class="fas fa-magic"></i>
                        Vers√£o 2: Interpola√ß√£o Avan√ßada
                    </button>
                </div>
            </div>

            <!-- Upload Area -->
            <div class="upload-container">
                <div id="dropZone" class="drop-zone">
                    <div class="drop-content">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <h3>Arraste e solte sua imagem aqui</h3>
                        <p>ou clique para selecionar</p>
                        <input type="file" id="fileInput" accept="image/*" hidden>
                    </div>
                </div>
                
                <!-- Preview -->
                <div id="preview" class="preview-container" style="display: none;">
                    <img id="previewImage" src="" alt="Preview">
                    <button id="removeImage" class="remove-btn">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>

            <!-- Settings -->
            <div class="settings-panel">
                <h3>Configura√ß√µes</h3>
                <div class="settings-grid">
                    <div class="setting-item">
                        <label for="frames">N√∫mero de Frames:</label>
                        <input type="range" id="frames" min="4" max="12" value="8">
                        <span id="framesValue">8</span>
                    </div>
                    <div class="setting-item">
                        <label for="fps">FPS:</label>
                        <input type="range" id="fps" min="8" max="24" value="12">
                        <span id="fpsValue">12</span>
                    </div>
                    <div class="setting-item">
                        <label for="quality">Qualidade:</label>
                        <select id="quality">
                            <option value="fast">R√°pida (256x256)</option>
                            <option value="balanced" selected>Balanceada (512x512)</option>
                            <option value="high">Alta (768x768)</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Generate Button -->
            <button id="generateBtn" class="generate-btn" disabled>
                <i class="fas fa-video"></i>
                Gerar V√≠deo (Demo)
            </button>

            <!-- Progress -->
            <div id="progress" class="progress-container" style="display: none;">
                <div class="progress-bar">
                    <div id="progressFill" class="progress-fill"></div>
                </div>
                <p id="progressText">Preparando...</p>
            </div>

            <!-- Results -->
            <div id="results" class="results-container" style="display: none;">
                <h3>V√≠deo Gerado (Demo):</h3>
                <div style="background: #f0f0f0; padding: 40px; border-radius: 15px; text-align: center; margin: 20px 0;">
                    <i class="fas fa-video" style="font-size: 3rem; color: #667eea; margin-bottom: 20px;"></i>
                    <h4>V√≠deo Demo</h4>
                    <p>Em produ√ß√£o, aqui apareceria o v√≠deo gerado pelo Stable Diffusion.</p>
                    <p><strong>Configura√ß√µes usadas:</strong></p>
                    <ul style="list-style: none; padding: 0;">
                        <li>Vers√£o: <span id="demoVersion">1</span></li>
                        <li>Frames: <span id="demoFrames">8</span></li>
                        <li>FPS: <span id="demoFps">12</span></li>
                        <li>Qualidade: <span id="demoQuality">Balanceada</span></li>
                    </ul>
                </div>
                <div class="download-section">
                    <button id="downloadBtn" class="download-btn">
                        <i class="fas fa-download"></i>
                        Baixar V√≠deo (Demo)
                    </button>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>Powered by Stable Diffusion & Netlify</p>
        </footer>
    </div>

    <script>
        // Demo version of the script
        let selectedVersion = 'version1';
        let selectedFile = null;
        let isGenerating = false;

        // DOM Elements
        const dropZone = document.getElementById('dropZone');
        const fileInput = document.getElementById('fileInput');
        const preview = document.getElementById('preview');
        const previewImage = document.getElementById('previewImage');
        const removeImage = document.getElementById('removeImage');
        const generateBtn = document.getElementById('generateBtn');
        const progress = document.getElementById('progress');
        const progressFill = document.getElementById('progressFill');
        const progressText = document.getElementById('progressText');
        const results = document.getElementById('results');
        const downloadBtn = document.getElementById('downloadBtn');

        // Version Buttons
        const version1Btn = document.getElementById('version1');
        const version2Btn = document.getElementById('version2');

        // Settings
        const framesSlider = document.getElementById('frames');
        const fpsSlider = document.getElementById('fps');
        const qualitySelect = document.getElementById('quality');
        const framesValue = document.getElementById('framesValue');
        const fpsValue = document.getElementById('fpsValue');

        // Demo elements
        const demoVersion = document.getElementById('demoVersion');
        const demoFrames = document.getElementById('demoFrames');
        const demoFps = document.getElementById('demoFps');
        const demoQuality = document.getElementById('demoQuality');

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            // Version selection
            version1Btn.addEventListener('click', () => selectVersion('version1'));
            version2Btn.addEventListener('click', () => selectVersion('version2'));
            
            // File handling
            dropZone.addEventListener('click', () => fileInput.click());
            dropZone.addEventListener('dragover', handleDragOver);
            dropZone.addEventListener('dragleave', handleDragLeave);
            dropZone.addEventListener('drop', handleDrop);
            fileInput.addEventListener('change', handleFileSelect);
            removeImage.addEventListener('click', removeSelectedImage);
            
            // Generate button
            generateBtn.addEventListener('click', generateVideo);
            
            // Settings
            framesSlider.addEventListener('input', updateFramesValue);
            fpsSlider.addEventListener('input', updateFpsValue);
            
            // Download button
            downloadBtn.addEventListener('click', downloadVideo);
            
            updateGenerateButton();
        }

        // Version Selection
        function selectVersion(version) {
            selectedVersion = version;
            version1Btn.classList.toggle('active', version === 'version1');
            version2Btn.classList.toggle('active', version === 'version2');
        }

        // File Handling
        function handleDragOver(e) {
            e.preventDefault();
            dropZone.classList.add('dragover');
        }

        function handleDragLeave(e) {
            e.preventDefault();
            dropZone.classList.remove('dragover');
        }

        function handleDrop(e) {
            e.preventDefault();
            dropZone.classList.remove('dragover');
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                handleFile(files[0]);
            }
        }

        function handleFileSelect(e) {
            const file = e.target.files[0];
            if (file) {
                handleFile(file);
            }
        }

        function handleFile(file) {
            if (!file.type.startsWith('image/')) {
                alert('Por favor, selecione apenas arquivos de imagem.');
                return;
            }
            
            if (file.size > 10 * 1024 * 1024) {
                alert('O arquivo √© muito grande. M√°ximo 10MB.');
                return;
            }
            
            selectedFile = file;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                previewImage.src = e.target.result;
                preview.style.display = 'block';
                dropZone.style.display = 'none';
            };
            reader.readAsDataURL(file);
            
            updateGenerateButton();
        }

        function removeSelectedImage() {
            selectedFile = null;
            preview.style.display = 'none';
            dropZone.style.display = 'block';
            fileInput.value = '';
            updateGenerateButton();
        }

        // Settings
        function updateFramesValue() {
            framesValue.textContent = framesSlider.value;
        }

        function updateFpsValue() {
            fpsValue.textContent = fpsSlider.value;
        }

        // Generate Button
        function updateGenerateButton() {
            generateBtn.disabled = !selectedFile || isGenerating;
        }

        // Video Generation (Demo)
        async function generateVideo() {
            if (!selectedFile || isGenerating) return;
            
            isGenerating = true;
            updateGenerateButton();
            
            progress.style.display = 'block';
            results.style.display = 'none';
            
            try {
                await simulateProgress();
                
                // Update demo values
                demoVersion.textContent = selectedVersion === 'version1' ? '1' : '2';
                demoFrames.textContent = framesSlider.value;
                demoFps.textContent = fpsSlider.value;
                demoQuality.textContent = qualitySelect.options[qualitySelect.selectedIndex].text;
                
                showResults();
                
            } catch (error) {
                console.error('Demo error:', error);
                alert('Erro na demonstra√ß√£o: ' + error.message);
            } finally {
                isGenerating = false;
                updateGenerateButton();
                progress.style.display = 'none';
            }
        }

        async function simulateProgress() {
            const steps = [
                { progress: 20, text: 'Carregando imagem...' },
                { progress: 40, text: 'Inicializando Stable Diffusion...' },
                { progress: 60, text: 'Gerando frames...' },
                { progress: 80, text: 'Processando v√≠deo...' },
                { progress: 100, text: 'Finalizando...' }
            ];
            
            for (const step of steps) {
                progressFill.style.width = step.progress + '%';
                progressText.textContent = step.text;
                await new Promise(resolve => setTimeout(resolve, 1000));
            }
        }

        function showResults() {
            results.style.display = 'block';
            results.scrollIntoView({ behavior: 'smooth' });
        }

        function downloadVideo() {
            alert('Em produ√ß√£o, aqui seria baixado o v√≠deo gerado pelo Stable Diffusion!');
        }

        // Prevent default drag behaviors
        document.addEventListener('dragover', e => e.preventDefault());
        document.addEventListener('drop', e => e.preventDefault());
    </script>
</body>
</html>
